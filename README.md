Caesium (Цезий)
===============

Клиент для ii, написанный на python3 с интерфейсом на ncurses.


Конфигурационный файл
---------------------

Файл caesium.cfg очень прост по своей структуре и содержит всего несколько параметров:

  * nodename - условное название ноды
  * editor - команда вызова текстового редактора
  * theme - имя цветовой схемы из директории themes/ без расширения
  * inlinestyle - по-умолчанию включает поддержку inline-оформления ('_', '**', '`', xpm-картинок и @base64-аттачей) 
  * nosplash - указание этой опции отключает splash screen при старте клиента
  * oldquote - включает старый формат цитирования (не рекомендуется для использования)
  * db - формат базы сообщений (txt, aio, ait или sqlite; настоятельно рекомендуется формат ait; sqlite пока в экспериментальном режиме)
  * to - имя, по которому клиент будет определять сообщения для помещения в карбонку; имён может быть несколько, указывать их необходимо через запятую без пробела после неё
  * node - адрес для работы с нодой
  * auth - строка авторизации для отправки сообщений на ноду
  * echo - название эхоконференции и описание
  * stat - название эхоконференции и описание (эха не попадает в архив, но и не синхронизируется с нодой)
  * archive - название и описание эхоконференции в архиве (архивные эхоконференции доступны только для чтения и не синхронизируются с нодой).
  * browser - команда запуска веб-браузера для открытия ссылок в сообщениях.

Клиент умеет работать с произвольным количеством нод. Описание каждой ноды в конфиге начинается с параметра nodename. Параметр editor можно указывать в произвольном месте конфигурационного файла.

Пример caesium.cfg:

```
editor nano
nosplash
db aio

nodename nodeN1
node http://127.0.0.1:62220/
auth authkey1
to anonymous

echo im.15
echo linux.15
archive linux.14

nodename nodeN2
node http://some.node.example/
auth authkey2
to John Doe

echo pol.15
echo humor.15
archive pol.15
archive humor.14
```

В этом примере, клиент настроен на работу с двумя нодами.

Клавиши управления
------------------

Экран выбора эхоконференции:

  * Курсор вверх/Курсор вниз - выбор эхоконференции
  * Page Up - перевести курсор на экран вверх
  * Page Down - перевести курсор на экран вниз
  * Home - перевести курсор в начало списка
  * End - перевести курсор в конец списка
  * Enter - перейти к чтению выделенной эхоконференции (индикатор 'E' в строке состояния)
  * O - просмотр исходящих сообщений
  * D - просмотр черновиков
  * Tab - переключение между архивным и основным списком эхоконференций
  * S - быстрый поиск эхоконференции по наименованию  
  * . - переключение на работу со следующей нодой
  * , - переключение на работу с предыдущей нодой
  * G - получить новые сообщения с ноды
  * Ctrl+G - получить новые сообщения с ноды (полный индекс, на всякий случай)
  * E - редактировать файл конфигурации
  * Y - открыть окно полнотекстового поиска
  * F10 - выход из клиента

Экран чтения эхоконференции:

  * Курсор влево/Курсор вправо - переход между сообщениями
  * \- - вернуться на одно сообщение назад в цепочке ответов
  * = - вернуться на одно сообщение в цепочке или к сообщению перед переходом по ii-ссылке 
  * Курсор вверх/Курсор вниз - прокрутка сообщения
  * Page Up - прокрутка сообщения на экран вверх
  * Page Down - прокрутка сообщения на экран вниз
  * Home - прокрутка в начало сообщения
  * End - прокрутка в конец сообщения
  * < - перейти в начало эхоконференции
  * \> - перейти в конец эхоконференции
  * Esc - выход из режима чтения в режим выбора эхоконференции
  * F10 - выход из клиента
  * F - пометить сообщение как избранное
  * W - сохранить сообщение в файл
  * M - показать id сообщения, адрес станции, с которой оно пришло и тему сообщения (полезно на небольших экранах)
  * I, Ins - написать новое сообщение в текущую эхоконференцию
  * Q - ответить на текущее сообщение с цитированием
  * V - открыть ссылку или вызвать меню выбора ссылки. При переходе по ii-ссылке, см. `=` для возврата. XPM и @base64-аттачи сохраняются в `downloads`.
  * G - попытаться получить сообщение с текущей ноды при переходе по ii-ссылке на отсутствующее сообщение 
  * Del - удалить сообщение (работает только при просмотре избранных сообщений)
  * L - список сообщений
  * Z - вкл/выкл inline-оформления (индикатор '~' в строке состояния)
  * S - быстрый поиск по телу сообщения
  * ! - вкл/выкл режим чтение сообщений только по теме (индикатор 'S' в строке состояния) 
  
Экран чтения исходящих сообщений:

  * E - Редактирование неотправленное сообщение
  * D - Перенести текущее сообщение в черновики, если оно не отправлено

Экран чтения черновиков:

  * O - Перенести текущее сообщение в исходящие
  * Del - удалить черновик

Экран списка сообщений:
  * Курсор вверх/Курсор вниз - выбор сообщения
  * Page Up - перевести курсор на экран вверх
  * Page Down - перевести курсор на экран вниз
  * Home - перевести курсор в начало списка
  * End - перевести курсор в конец списка
  * Enter - перейти к чтению выделенного сообщения
  * S - быстрый поиск сообщения по отправителю/теме  
  * ! - вкл/выкл режим просмотра сообщений только по теме (индикатор 'S' в строке состояния)
  * Esc - закрыть экран списка сообщений

Во время быстрого поиска:
  * Курсор влево/вправо - перемещение курсора в строке поиска
  * Backspace - удалить символ перед курсором в строке поиска
  * Del - удалить символ под курсором в строке поиска  
  * Курсор вверх/вниз - предыдущее/следующее вхождение
  * Page Up - перевести курсор к вхождению на экран вверх
  * Page Down - перевести курсор к вхождению на экран вниз
  * Home - перевести курсор в начало списка вхождений
  * End - перевести курсор в конец списка вхождений
  * Esc, Enter - завершить поиск
  * Enter - на экране списка сообщений завершить поиск, оставив только найденное (индикатор 'Q' в строке состояния) 

Окно полнотекстового поиска:
  * Tab/Shift+Tab, Курсор вверх/вниз - навигация по элементам
  * Space - вкл/выкл чекбоксы
  * Enter - искать, в случае успеха откроется экран чтения эхоконференции с найденными сообщениями (индикатор 'F' в строке состояния)
  * Esc - закрыть окно поиска или остановить поиск, если запущен

Если вы случайно вызвали функцию нового сообщения, то можно просто удалить весь текст, включая заголовок и сохранить файл либо просто закрыть текстовый редактор без сохранения файла. Тогда оно не попадёт в директорию out/.

На экране выбора эхоконференции перед названием может отображаться знак "+". Он указывает на то, что после последнего сообщения, которое читал пользователь есть ещё сообщения в эхоконференции.
